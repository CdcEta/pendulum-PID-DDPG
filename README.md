# ğŸ§  Pendulum Control Suite (DDPG & PID)

æœ¬é¡¹ç›®åŒ…å«åŸºäºå¼ºåŒ–å­¦ä¹  (DDPG) ä¸ç»å…¸æ§åˆ¶ (PID) çš„ **æ‘†æ†æ§åˆ¶å®éªŒ**ï¼Œæ”¯æŒ `gymnasium` ä¸æ—§ç‰ˆ `gym` ç¯å¢ƒã€‚
é¡¹ç›®åŒ…æ‹¬ï¼š
- DDPG æ™ºèƒ½ä½“çš„è®­ç»ƒä¸è¯„ä¼°
- PID æ§åˆ¶å™¨æ‰‹åŠ¨æ§åˆ¶ä¸è‡ªåŠ¨è°ƒå‚
- å¯è§†åŒ–ç»˜å›¾ã€GIF è¾“å‡ºä¸å¤šçº¿ç¨‹å‚æ•°æœç´¢

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ ddpg_pendulum-v0.py       # DDPG å¼ºåŒ–å­¦ä¹ å®ç°ï¼ˆæ”¯æŒ Gymnasiumï¼‰
â”œâ”€â”€ pid_control_chatgpt.py    # PID æ§åˆ¶å™¨å®æ—¶æ¼”ç¤º
â”œâ”€â”€ pid_control_find.py       # PID è‡ªåŠ¨è°ƒå‚ + å¯è§†åŒ–
â”œâ”€â”€ main.py                   # ç®€å•ç¯å¢ƒæµ‹è¯• (éšæœºåŠ¨ä½œ)
â”œâ”€â”€ requirements.txt          # ä¾èµ–æ–‡ä»¶
â””â”€â”€ runs_pendulum/            # è®­ç»ƒç»“æœè¾“å‡ºç›®å½• 
â””â”€â”€ runs_pid/                 # äººå·¥æ§åˆ¶ç»“æœè¾“å‡ºç›®å½• 
```

---

## âš™ï¸ ç¯å¢ƒå®‰è£…

å»ºè®®ä½¿ç”¨ **Python 3.9â€“3.11** ä¸ **Anaconda** ç¯å¢ƒã€‚

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ pip å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### æ–¹å¼äºŒï¼šä½¿ç”¨ Conda åˆ›å»ºç¯å¢ƒ
```bash
conda create -n pendulum python=3.10
conda activate pendulum
pip install -r requirements.txt
```

---

## ğŸš€ è¿è¡Œè¯´æ˜

### 1ï¸âƒ£ **DDPG è®­ç»ƒ Pendulum ç¯å¢ƒ**
```bash
python ddpg_pendulum-v0.py --env Pendulum-v1 --episodes 300 --render_eval --save_gif
```

**å‚æ•°è¯´æ˜ï¼š**
| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--env` | `Pendulum-v1` | ç¯å¢ƒåç§° |
| `--episodes` | `200` | è®­ç»ƒå›åˆæ•° |
| `--render_eval` | - | å¯ç”¨è¯„ä¼°æ—¶å®æ—¶æ¸²æŸ“ |
| `--save_gif` | - | ä¿å­˜è¯„ä¼°åŠ¨ç”» GIF |


åŒ…æ‹¬ï¼š
- `returns.png`ï¼šæ¯å›åˆå›æŠ¥æ›²çº¿  
- `pi_loss.png`ï¼šç­–ç•¥ç½‘ç»œæŸå¤±  
- `q_loss.png`ï¼šä»·å€¼ç½‘ç»œæŸå¤±  
- `eval.gif`ï¼šæ™ºèƒ½ä½“è¯„ä¼°åŠ¨ç”»  

---

### 2ï¸âƒ£ **PID æ‰‹åŠ¨æ§åˆ¶æ¼”ç¤º**
```bash
python pid_control_chatgpt.py
```
é€šè¿‡å›ºå®š PID å‚æ•°æ§åˆ¶å€’ç«‹æ‘†ï¼Œçª—å£æ ‡é¢˜å®æ—¶æ˜¾ç¤ºè§’åº¦ã€è§’é€Ÿåº¦ä¸åŠ›çŸ©è¾“å‡ºã€‚

å¯ä¿®æ”¹ä»£ç ä¸­ï¼š
```python
P = 45.0
I = 0.50
D = 10.0
```
è°ƒæ•´æ§åˆ¶å™¨æ€§èƒ½ã€‚

---

## ğŸ§© ä¸»è¦ä¾èµ–

| åº“ | åŠŸèƒ½ | ç‰ˆæœ¬å»ºè®® |
|----|------|-----------|
| `torch` | æ·±åº¦ç¥ç»ç½‘ç»œ | â‰¥1.10 |
| `gymnasium` | å¼ºåŒ–å­¦ä¹ ç¯å¢ƒ | â‰¥0.29 |
| `pygame` | å®æ—¶å¯è§†åŒ–ä¸çª—å£æ¸²æŸ“ | â‰¥2.5 |
| `matplotlib` | ç»˜å›¾ä¸ç»“æœå±•ç¤º | â‰¥3.7 |
| `imageio` | GIF ç”Ÿæˆ | â‰¥2.31 |
| `numpy` | æ•°å€¼è®¡ç®— | â‰¥1.24 |

---

## ğŸ§  ç®—æ³•ç®€ä»‹

### ğŸ”¹ DDPGï¼ˆDeep Deterministic Policy Gradientï¼‰
ä¸€ç§åŸºäº Actor-Critic æ¶æ„çš„è¿ç»­åŠ¨ä½œç©ºé—´å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼š
- **Actor**ï¼šè¾“å‡ºè¿ç»­åŠ¨ä½œ  
- **Critic**ï¼šè¯„ä¼°åŠ¨ä½œçš„ä»·å€¼  
- ä½¿ç”¨ **ç›®æ ‡ç½‘ç»œ (Target Network)** ä¸ **ç»éªŒå›æ”¾ (Replay Buffer)** ç¨³å®šè®­ç»ƒ  
- ä½¿ç”¨ **OU å™ªå£° (Ornstein-Uhlenbeck Process)** å¢å¼ºæ¢ç´¢æ€§  

### ğŸ”¹ PID æ§åˆ¶
é€šè¿‡æ¯”ä¾‹ (P)ã€ç§¯åˆ† (I)ã€å¾®åˆ† (D) ä¸‰é¡¹è°ƒèŠ‚å®ç°å¹³è¡¡æ§åˆ¶ï¼š
- `u(t) = P * e(t) + I * âˆ«e(t) dt + D * de(t)/dt`

---

## ğŸ“Š ç¤ºä¾‹ç»“æœ

| è®­ç»ƒç±»å‹         | ç¤ºä¾‹å›¾                                                       |
|--------------|-----------------------------------------------------------|
| DDPG pi_loss | ![returns](runs_pendulum/run_20251022_210825/pi_loss.png) |
| DDPG q_loss  | ![returns](runs_pendulum/run_20251022_210825/q_loss.png)  |
| DDPG è®­ç»ƒå›æŠ¥    | ![returns](runs_pendulum/run_20251022_210825/returns.png) |
| DDPG è¯„ä¼°åŠ¨ç”»    | ![returns](runs_pendulum/run_20251022_210825/eval.gif)    |
| PID å‚æ•°æœç´¢     | ![pid_search](runs_pid/pid_search_3d.png)                 |



